{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Thinkful\\\\my-code-samples\\\\Module-31-2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _asyncToGenerator from\"C:\\\\Thinkful\\\\my-code-samples\\\\Module-31-2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _objectSpread from\"C:\\\\Thinkful\\\\my-code-samples\\\\Module-31-2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Thinkful\\\\my-code-samples\\\\Module-31-2\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Thinkful\\\\my-code-samples\\\\Module-31-2\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{useHistory,useLocation}from\"react-router-dom\";import{createDeck,updateDeck,listDecks}from\"../../utils/api/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function DeckForm(_ref){var deck=_ref.deck;var history=useHistory();var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isEdit=_useState2[0],setIsEdit=_useState2[1];var _useState3=useState({\"name\":\"\"}),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState({\"description\":\"\"}),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];useEffect(function(){function addOrEdit(){if(pathname.includes(\"edit\")){setName({\"name\":deck.name});setDescription({\"description\":deck.description});}else{setIsEdit(false);}}addOrEdit();},[deck,pathname]);function handleName(event){setName(_objectSpread(_objectSpread({},name),{},{\"name\":event.target.value}));}function handleDescription(event){setDescription(_objectSpread(_objectSpread({},description),{},{\"description\":event.target.value}));}function handleCreate(){return _handleCreate.apply(this,arguments);}function _handleCreate(){_handleCreate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,newDeckId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createDeck(_objectSpread(_objectSpread({},name),description));case 2:_context.next=4;return listDecks();case 4:response=_context.sent;newDeckId=Math.max.apply(Math,_toConsumableArray(response.map(function(deck){return deck.id;})));history.push(\"/decks/\".concat(newDeckId));case 7:case\"end\":return _context.stop();}}},_callee);}));return _handleCreate.apply(this,arguments);}function handleUpdate(){updateDeck(_objectSpread(_objectSpread({\"id\":deck.id},name),description));history.push(\"/decks/\".concat(deck.id));}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",value:name.name||'',placeholder:isEdit?null:\"Deck Name\",onChange:handleName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"description\",rows:\"3\",value:description.description||'',placeholder:isEdit?null:\"Brief Description of Deck\",onChange:handleDescription,children:\" \"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary mr-1\",onClick:function onClick(){return history.push(isEdit?\"/decks/\".concat(deck.id):\"/\");},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:isEdit?handleUpdate:handleCreate,children:\"Submit\"})]})});}export default DeckForm;","map":{"version":3,"sources":["C:/Thinkful/my-code-samples/Module-31-2/src/components/Decks/DeckForm.js"],"names":["React","useState","useEffect","useHistory","useLocation","createDeck","updateDeck","listDecks","DeckForm","deck","history","pathname","isEdit","setIsEdit","name","setName","description","setDescription","addOrEdit","includes","handleName","event","target","value","handleDescription","handleCreate","response","newDeckId","Math","max","map","id","push","handleUpdate"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useHistory, useLocation} from \"react-router-dom\";\r\nimport { createDeck, updateDeck, listDecks } from \"../../utils/api/index\";\r\n\r\nfunction DeckForm({deck}) {\r\n  \r\n  const history = useHistory();\r\n  const {pathname} = useLocation();\r\n\r\n  const [isEdit, setIsEdit] = useState(true);\r\n  const [name, setName] = useState({\"name\": \"\"});\r\n  const [description, setDescription] = useState({\"description\": \"\"});\r\n\r\n  useEffect(() => {\r\n    function addOrEdit() {\r\n      if (pathname.includes(\"edit\")) {\r\n        setName({\"name\": deck.name});\r\n        setDescription({\"description\": deck.description});\r\n      } else {\r\n        setIsEdit(false);\r\n      } \r\n    }\r\n    addOrEdit();\r\n  }, [deck, pathname])\r\n\r\n  function handleName(event) {\r\n    setName({...name, \"name\": event.target.value});\r\n  }\r\n\r\n  function handleDescription(event) {\r\n    setDescription({...description, \"description\": event.target.value});\r\n  }\r\n \r\n  async function handleCreate() {\r\n    await createDeck({...name, ...description});\r\n    const response = await listDecks();\r\n    const newDeckId = Math.max(...response.map(deck => deck.id));\r\n    history.push(`/decks/${newDeckId}`);\r\n  }\r\n\r\n  function handleUpdate() {\r\n    updateDeck({\"id\": deck.id, ...name, ...description});\r\n    history.push(`/decks/${deck.id}`);\r\n  }\r\n  \r\n  return (\r\n    <>\r\n      <form>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"name\">Name:</label>\r\n          <input type=\"text\" className=\"form-control\" id=\"name\" value={name.name || ''} placeholder={isEdit ? null : \"Deck Name\"} onChange={handleName} />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"description\">Description:</label>\r\n          <textarea className=\"form-control\" id=\"description\" rows=\"3\" value={description.description || ''} placeholder={isEdit ? null : \"Brief Description of Deck\"} onChange={handleDescription}> </textarea>\r\n        </div>\r\n        \r\n        <button type=\"button\" className=\"btn btn-secondary mr-1\" onClick={() => history.push(isEdit ? `/decks/${deck.id}` : \"/\")}>Cancel</button>\r\n       \r\n        <button \r\n          type=\"button\"\r\n          className=\"btn btn-primary\"\r\n          onClick={isEdit ? handleUpdate : handleCreate}\r\n          >Submit\r\n        </button>\r\n\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default DeckForm;"]},"metadata":{},"sourceType":"module"}